---
import { localizePath } from "astro-i18next";
import { localizeDate } from "../../shared/utils";

const { pubDate, title, preview, slug } = Astro.props;

function isLessThanAWeekAgo(date) {
    const dateToCompare = new Date(date);
    const now = new Date();
    const oneWeekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);

    return dateToCompare > oneWeekAgo;
}

const localizedDate = localizeDate(pubDate);
const isNew = isLessThanAWeekAgo(localizedDate);
---

<a href={localizePath(`/blog/${slug}`)} class="">
    <div
        class="p-6 bg-slate-800 rounded-xl border border-gray-700 shadow-md hover:shadow-2xl mb-4"
    >
        <div class="flex flex-row items-center mb-4">
            {isNew && <div class="px-3 bg-blue-400 rounded-xl mr-2">new</div>}
            <span class="text-gray-300">{localizedDate}</span>
        </div>
        <h4 class="font-bold text-xl md:text-2xl mb-1">{title}</h4>
        <p class="text-lg md:text-xl text-slate-400 leading-5">{preview}</p>
    </div>
</a>
